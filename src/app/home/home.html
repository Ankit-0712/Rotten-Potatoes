<app-header></app-header>

<div class="home-container">
  <div class="all-movies">
    <div class="trending-movies">
      <div class="top">
        <h4>Trending Movies</h4>
        <div class="view-all">View All</div>
      </div>

      <div class="movies-thumbnail" *ngIf="trendingMovies && trendingMovies.length">
        <div class="movie" *ngFor="let movie of trendingMovies">
          <div class="cover">
            <img [src]="movie.cover" alt="{{ movie.name }}" />
          </div>

          <div class="details">
            <div class="name">{{ movie.name }}</div>

            <!-- ✅ Custom heart template for rating -->
            <ng-template #t let-fill="fill">
              <i
                class="bi bi-heart"
                style="position: relative; color: #ccc; display: inline-block; width: 1.5rem;"
              >
                <i
                  class="bi bi-heart-fill"
                  style="color: red; position: absolute; top: 0; left: 0; overflow: hidden;"
                  [style.width.%]="fill"
                ></i>
              </i>
            </ng-template>

            <!-- ✅ Correct rating binding -->
            <ngb-rating
              [rate]="movie.rating"
              [starTemplate]="t"
              [readonly]="true"
              [max]="5"
              [ariaValueText]="ariaValueText"
            ></ngb-rating>

            <!-- ✅ Show exact numeric rating below hearts -->
            <div class="rating-value">{{ movie.rating.toFixed(1) }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
